import{d as e,r as t,b as n,z as a,e as o,f as r}from"./vue-Dk88WT-Z.js";import{M as s,T as c}from"./maptalks.es-7YTiJo2Q.js";import{_ as i}from"./index-B0ZIqjz2.js";import"./common-DJbht5QT.js";import"./element-CcAO_LfK.js";const m={id:"map",ref:"mapRef",class:"content"};const u=i(e({__name:"App",setup(e,{expose:o}){o();const r=t();function i(){const e=new s(r.value,{center:[-.113049,51.498568],zoom:14,baseLayer:new c("base",{urlTemplate:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],attribution:"&copy; <a href='http://osm.org'>OpenStreetMap</a> contributors, &copy; <a href='https://carto.com/'>CARTO</a>"})});let t=null;return e.on("mousemove",(function(n){t=n.containerPoint,e.getRenderer().setToRedraw()})),e.on("mouseout",(function(){t=null,e.getRenderer().setToRedraw()})),e.on("renderend",(function(e){if(!t)return;const n=e.context;let a=150;const o=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;a*=o>1?2:1;const r=t.x*o,s=t.y*o,c=r-a,i=s-a,m=2*a+2,u=n.getImageData(c,i,m,m).data,l=n.createImageData(m,m),d=l.data;for(let t=0;t<m;++t)for(let e=0;e<m;++e){const n=e-a,o=t-a;let r=e,s=t;Math.sqrt(n*n+o*o)<a&&(r=Math.round(a+n/2),s=Math.round(a+o/2));const c=4*(t*m+e),i=4*(s*m+r);d[c]=u[i],d[c+1]=u[i+1],d[c+2]=u[i+2],d[c+3]=u[i+3]}n.beginPath(),n.strokeStyle="#bbb",n.lineWidth=2,n.arc(r,s,a+2,0,2*Math.PI),n.stroke(),n.closePath(),n.drawImage(function(e,t){const n=document.createElement("canvas"),a=document.createElement("canvas");n.width=n.height=a.width=a.height=t,n.getContext("2d").putImageData(e,0,0);const o=a.getContext("2d");return o.beginPath(),o.arc(t/2,t/2,t/2,0,2*Math.PI),o.clip(),o.drawImage(n,0,0),a}(l,m),r-m/2,s-m/2)})),()=>{e.remove()}}n((()=>{const e=i();a((()=>{null==e||e()}))}));const m={mapRef:r,initMap:i};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),[["render",function(e,t,n,a,s,c){return o(),r("div",m,null,512)}],["__file","/home/runner/work/mtk-playground/mtk-playground/.playgrounds/basic/map/map-magnifier/src/App.vue"]]);export{u as default};
