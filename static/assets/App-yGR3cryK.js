import{d as e,r as t,b as s,z as r,e as a,f as n}from"./vue-CtmyoV7S.js";import{T as o,M as i}from"./maptalks.es-DA00DZSb.js";import{_ as l}from"./index-BoVgjk73.js";import"./common-DJbht5QT.js";import"./element-BF3D_0r8.js";const p={id:"map",ref:"mapRef",class:"content"};const c=l(e({__name:"App",setup(e,{expose:a}){a();const n=t();function l(){const e=1/.0254,t=2*Math.PI*6378137/360;function s(e,t,s,r){const a=["x",t,"y",s,"scale",r];for(let n=0,o=a.length;n<o;n+=2)e=e.replace("{"+a[n]+"}",a[n+1]);return e}const r=5,a=.009507170090264933,l=[114.59,42.31],p=[];for(let n=0;n<=r;n++)p.push(a/Math.pow(2,n));const c={projection:"EPSG:4326",resolutions:p,fullExtent:{top:42.31,left:114.59,bottom:37.44232891378436,right:119.45767108621564}},u=new o("base",{repeatWorld:!0,urlTemplate:"https://iserver.supermap.io/iserver/services/map-jingjin/rest/maps/%E4%BA%AC%E6%B4%A5%E5%9C%B0%E5%8C%BA%E5%9C%B0%E5%9B%BE/tileImage.png?width=256&height=256&redirect=false&transparent=true&cacheEnabled=true&origin=%7B%22x%22%3A114.59%2C%22y%22%3A42.31%7D&overlapDisplayed=false&scale={scale}&x={x}&y={y}",spatialReference:c,subdomains:["a","b","c","d"],attribution:'&copy; <a href="https://www.supermap.com/cn/">supermap</a> contributors',tileSystem:[1,-1].concat(l)});u.getTileUrl=function(r,a,n){if(this.scales=this.scales||{},this.scales[n])return s(this.options.urlTemplate,r,a,this.scales[n]);const o=this.getMap().getSpatialReference().getProjection(),i=this._getTileExtent(r,a,n),l=i.getMin(),p=i.getMax(),c=o.project(p),u=o.project(l),m=this.options.tileSize[0],h=function(s,r){let a=s*r*e*t;return a=1/a,a}(Math.max(Math.abs(c.x-u.x)/m,Math.abs(c.y-u.y)/m),96);return this.scales[n]=h,s(this.options.urlTemplate,r,a,this.scales[n])},u._getTileExtent=function(e,t,s){const r=this.getMap()._getResolution(s);return this._getTileConfig().getTilePrjExtent(e,t,r)};const m=new i(n.value,{center:[116.85,39.79],zoom:0,spatialReference:c,baseLayer:u});return()=>{m.remove()}}s((()=>{const e=l();r((()=>{e()}))}));const p={mapRef:n,initMap:l};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(e,t,s,r,o,i){return a(),n("div",p,null,512)}],["__file","/home/runner/work/mtk-playground/mtk-playground/.playgrounds/basic/tilelayer-projection/custom-tile/src/App.vue"]]);export{c as default};
