var t=Object.defineProperty,e=(e,r,a)=>((e,r,a)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a)(e,"symbol"!=typeof r?r+"":r,a);import{d as r,r as a,b as o,z as s,e as n,f as i}from"./vue-CtmyoV7S.js";import{M as c,T as l,l as p,b as d,m as u}from"./maptalks.es-DBJKwkJk.js";import{_ as m}from"./index-DOPLBmHq.js";import"./common-DJbht5QT.js";import"./element-BF3D_0r8.js";const h={id:"map",ref:"mapRef",class:"content"};const f=m(r({__name:"App",setup(t,{expose:r}){r();const n=a();function i(){const t=new c(n.value,{center:[-.113049,51.498568],zoom:14,baseLayer:new l("base",{urlTemplate:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],attribution:"&copy; <a href='http://osm.org'>OpenStreetMap</a> contributors, &copy; <a href='https://carto.com/'>CARTO</a>"})});class r extends u{constructor(t,r,a){super(t,a),e(this,"data"),this.data=r}setData(t){return this.data=t,this}getData(){return this.data}}r.mergeOptions({color:"Red",font:"30px san-serif"});class a extends p.CanvasRenderer{checkResources(){return[]}draw(){const t=this._drawData(this.layer.getData(),this.layer.options.color);this._drawnData=t,this.completeRender()}_drawData(t,e){if(!Array.isArray(t))return;const r=this.getMap();this.prepareCanvas();const a=this.context;a.fillStyle=e,a.font=this.layer.options.font;const o=r.getContainerExtent(),s=[];return t.forEach((t=>{const e=r.coordinateToContainerPoint(new d(t.coord));if(!o.contains(e))return;const n=t.text,i=a.measureText(n);a.fillText(n,e.x-i.width/2,e.y),s.push(t)})),s}}r.registerRenderer("canvas",a);const o=new r("hello");return o.setData([{coord:t.getCenter().toArray(),text:"Hello World"},{coord:t.getCenter().add(.01,.01).toArray(),text:"Hello World 2"}]),o.addTo(t),()=>{t.remove()}}o((()=>{const t=i();s((()=>{t()}))}));const m={mapRef:n,initMap:i};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),[["render",function(t,e,r,a,o,s){return n(),i("div",h,null,512)}],["__file","/home/runner/work/mtk-playground/mtk-playground/.playgrounds/basic/hellolayer/layer/src/App.vue"]]);export{f as default};
